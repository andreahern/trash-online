{"ast":null,"code":"import _defineProperty from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import jwt_decode from\"jwt-decode\";import{find,join}from\"../GameFunctions\";var JoinGame=/*#__PURE__*/function(_Component){_inherits(JoinGame,_Component);var _super=_createSuper(JoinGame);function JoinGame(){var _this;_classCallCheck(this,JoinGame);_this=_super.call(this);_this.state={openGames:[]};_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));return _this;}_createClass(JoinGame,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,decoded,openGames;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;token=localStorage.token;decoded=jwt_decode(token);if(!(Date.now()>=decoded.exp*1000)){_context.next=5;break;}throw new Error(\"token expired\");case 5:_context.next=7;return find();case 7:openGames=_context.sent;this.setState({openGames:openGames.data});_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);this.props.history.push(\"/users/login\");case 15:case\"end\":return _context.stop();}}},_callee,this,[[0,11]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"handleClick\",value:function handleClick(id){var _this2=this;var newUser={id:id,password:this.state.password};join(newUser).then(function(res){if(!res.error){_this2.props.history.push(\"/table\");}});}},{key:\"onChange\",value:function onChange(e){this.setState(_defineProperty({},e.target.name,e.target.value));}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 m-auto\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"fas fa-3x\"},\"Join Game\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",id:\"password\",name:\"password\",className:\"form-control\",placeholder:\"Enter Password\",onChange:this.onChange})),this.state.openGames.map(function(game,key){return/*#__PURE__*/React.createElement(\"div\",{key:key+100},/*#__PURE__*/React.createElement(\"h3\",{className:\"fas fa-2x mt-2\"},game.name),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){_this3.handleClick(game._id);},className:\"btn btn-primary ml-3\"},\"Join\"));})))));}}]);return JoinGame;}(Component);export default JoinGame;","map":{"version":3,"sources":["/mnt/c/Users/Abe/Documents/projects/trash-online/client/src/views/JoinGame.js"],"names":["React","Component","jwt_decode","find","join","JoinGame","state","openGames","onChange","bind","token","localStorage","decoded","Date","now","exp","Error","setState","data","console","log","message","props","history","push","id","newUser","password","then","res","error","e","target","name","value","map","game","key","handleClick","_id"],"mappings":"+2CAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,OAASC,IAAT,CAAeC,IAAf,KAA2B,kBAA3B,C,GAEMC,CAAAA,Q,oGACJ,mBAAc,0CACZ,wBACA,MAAKC,KAAL,CAAa,CACXC,SAAS,CAAE,EADA,CAAb,CAIA,MAAKC,QAAL,CAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB,CANY,aAOb,C,+TAISC,K,CAAQC,YAAY,CAACD,K,CACrBE,O,CAAUV,UAAU,CAACQ,KAAD,C,MACtBG,IAAI,CAACC,GAAL,IAAcF,OAAO,CAACG,GAAR,CAAc,I,+BAAY,IAAIC,CAAAA,KAAJ,CAAU,eAAV,C,8BACpBb,CAAAA,IAAI,E,QAAtBI,S,eACN,KAAKU,QAAL,CAAc,CACZV,SAAS,CAAEA,SAAS,CAACW,IADT,CAAd,E,iFAIAC,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB,EACA,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,iB,kOAIQC,E,CAAI,iBACd,GAAMC,CAAAA,OAAO,CAAG,CACdD,EAAE,CAAEA,EADU,CAEdE,QAAQ,CAAE,KAAKrB,KAAL,CAAWqB,QAFP,CAAhB,CAKAvB,IAAI,CAACsB,OAAD,CAAJ,CAAcE,IAAd,CAAmB,SAACC,GAAD,CAAS,CAC1B,GAAI,CAACA,GAAG,CAACC,KAAT,CAAgB,CACd,MAAI,CAACR,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,WACD,CACF,CAJD,EAKD,C,0CAEQO,C,CAAG,CACV,KAAKd,QAAL,oBAAiBc,CAAC,CAACC,MAAF,CAASC,IAA1B,CAAiCF,CAAC,CAACC,MAAF,CAASE,KAA1C,GACD,C,uCAEQ,iBACP,mBACE,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,0BAAI,SAAS,CAAC,WAAd,cADF,cAEE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,6BAAO,OAAO,CAAC,UAAf,aADF,cAEE,6BACE,IAAI,CAAC,UADP,CAEE,EAAE,CAAC,UAFL,CAGE,IAAI,CAAC,UAHP,CAIE,SAAS,CAAC,cAJZ,CAKE,WAAW,CAAC,gBALd,CAME,QAAQ,CAAE,KAAK1B,QANjB,EAFF,CADF,CAYG,KAAKF,KAAL,CAAWC,SAAX,CAAqB4B,GAArB,CAAyB,SAACC,IAAD,CAAOC,GAAP,CAAe,CACvC,mBACE,2BAAK,GAAG,CAAEA,GAAG,CAAG,GAAhB,eACE,0BAAI,SAAS,CAAC,gBAAd,EAAgCD,IAAI,CAACH,IAArC,CADF,cAEE,8BACE,OAAO,CAAE,kBAAM,CACb,MAAI,CAACK,WAAL,CAAiBF,IAAI,CAACG,GAAtB,EACD,CAHH,CAIE,SAAS,CAAC,sBAJZ,SAFF,CADF,CAaD,CAdA,CAZH,CAFF,CADF,CADF,CADF,CAqCD,C,sBAhFoBtC,S,EAmFvB,cAAeI,CAAAA,QAAf","sourcesContent":["import React, { Component } from \"react\";\nimport jwt_decode from \"jwt-decode\";\nimport { find, join } from \"../GameFunctions\";\n\nclass JoinGame extends Component {\n  constructor() {\n    super();\n    this.state = {\n      openGames: [],\n    };\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  async componentDidMount() {\n    try {\n      const token = localStorage.token;\n      const decoded = jwt_decode(token);\n      if (Date.now() >= decoded.exp * 1000) throw new Error(\"token expired\");\n      const openGames = await find();\n      this.setState({\n        openGames: openGames.data,\n      });\n    } catch (err) {\n      console.log(err.message);\n      this.props.history.push(`/users/login`);\n    }\n  }\n\n  handleClick(id) {\n    const newUser = {\n      id: id,\n      password: this.state.password,\n    };\n\n    join(newUser).then((res) => {\n      if (!res.error) {\n        this.props.history.push(`/table`);\n      }\n    });\n  }\n\n  onChange(e) {\n    this.setState({ [e.target.name]: e.target.value });\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"row mt-5\">\n          <div className=\"col-md-6 m-auto\">\n            <h1 className=\"fas fa-3x\">Join Game</h1>\n            <div className=\"card card-body\">\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">Password</label>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  name=\"password\"\n                  className=\"form-control\"\n                  placeholder=\"Enter Password\"\n                  onChange={this.onChange}\n                />\n              </div>\n              {this.state.openGames.map((game, key) => {\n                return (\n                  <div key={key + 100}>\n                    <h3 className=\"fas fa-2x mt-2\">{game.name}</h3>\n                    <button\n                      onClick={() => {\n                        this.handleClick(game._id);\n                      }}\n                      className=\"btn btn-primary ml-3\"\n                    >\n                      Join\n                    </button>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default JoinGame;\n"]},"metadata":{},"sourceType":"module"}