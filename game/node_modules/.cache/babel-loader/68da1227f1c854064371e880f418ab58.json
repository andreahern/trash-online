{"ast":null,"code":"import _regeneratorRuntime from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/mnt/c/Users/Abe/Documents/projects/trash-online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import jwt_decode from\"jwt-decode\";import{stats}from\"../UserFunctions\";var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(){var _this;_classCallCheck(this,Profile);_this=_super.call(this);_this.state={username:\"\",wins:0,losses:0};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,decoded,_yield$stats,wins,losses;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;token=localStorage.token;decoded=jwt_decode(token);if(!(Date.now()>=decoded.exp*1000)){_context.next=5;break;}throw new Error(\"token expired\");case 5:this.setState({username:decoded.username});_context.next=8;return stats(decoded.userId);case 8:_yield$stats=_context.sent;wins=_yield$stats.wins;losses=_yield$stats.losses;this.setState({wins:wins,losses:losses});_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);this.props.history.push(\"/users/login\");case 17:case\"end\":return _context.stop();}}},_callee,this,[[0,14]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(prevProps,prevState){var token,decoded,_yield$stats2,wins,losses;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=localStorage.token;decoded=jwt_decode(token);_context2.next=4;return stats(decoded.userId);case 4:_yield$stats2=_context2.sent;wins=_yield$stats2.wins;losses=_yield$stats2.losses;if(prevState.wins!==wins||prevState.losses!==losses)this.setState({wins:wins,losses:losses});case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidUpdate(_x,_x2){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"container mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 m-auto\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"fas fa-3x\"},\"Welcome, \",this.state.username),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 m-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body text-center\"},/*#__PURE__*/React.createElement(\"h6\",null,\"Wins: \",/*#__PURE__*/React.createElement(\"b\",null,this.state.wins)),/*#__PURE__*/React.createElement(\"h6\",null,\"Losses: \",/*#__PURE__*/React.createElement(\"b\",null,this.state.losses)))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 m-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body text-center\"},/*#__PURE__*/React.createElement(Link,{to:\"/hostgame\",className:\"btn btn-primary btn-block mb-2\"},\"Host Game\"),/*#__PURE__*/React.createElement(Link,{to:\"/joingame\",className:\"btn btn-primary btn-block mb-2\"},\"Join Game\"))))));}}]);return Profile;}(Component);export default Profile;","map":{"version":3,"sources":["/mnt/c/Users/Abe/Documents/projects/trash-online/client/src/views/Profile.js"],"names":["React","Component","Link","jwt_decode","stats","Profile","state","username","wins","losses","token","localStorage","decoded","Date","now","exp","Error","setState","userId","props","history","push","prevProps","prevState"],"mappings":"igCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,OAASC,KAAT,KAAsB,kBAAtB,C,GAEMC,CAAAA,O,kGACJ,kBAAc,yCACZ,wBACA,MAAKC,KAAL,CAAa,CACXC,QAAQ,CAAE,EADC,CAEXC,IAAI,CAAE,CAFK,CAGXC,MAAM,CAAE,CAHG,CAAb,CAFY,aAOb,C,6UAISC,K,CAAQC,YAAY,CAACD,K,CACrBE,O,CAAUT,UAAU,CAACO,KAAD,C,MACtBG,IAAI,CAACC,GAAL,IAAcF,OAAO,CAACG,GAAR,CAAc,I,+BAAY,IAAIC,CAAAA,KAAJ,CAAU,eAAV,C,QAC5C,KAAKC,QAAL,CAAc,CAAEV,QAAQ,CAAEK,OAAO,CAACL,QAApB,CAAd,E,sBAC+BH,CAAAA,KAAK,CAACQ,OAAO,CAACM,MAAT,C,mCAA5BV,I,cAAAA,I,CAAMC,M,cAAAA,M,CACd,KAAKQ,QAAL,CAAc,CACZT,IAAI,CAAJA,IADY,CAEZC,MAAM,CAANA,MAFY,CAAd,E,iFAKA,KAAKU,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,iB,iUAIqBC,S,CAAWC,S,kKAC5Bb,K,CAAQC,YAAY,CAACD,K,CACrBE,O,CAAUT,UAAU,CAACO,KAAD,C,wBACKN,CAAAA,KAAK,CAACQ,OAAO,CAACM,MAAT,C,qCAA5BV,I,eAAAA,I,CAAMC,M,eAAAA,M,CAEd,GAAIc,SAAS,CAACf,IAAV,GAAmBA,IAAnB,EAA2Be,SAAS,CAACd,MAAV,GAAqBA,MAApD,CACE,KAAKQ,QAAL,CAAc,CACZT,IAAI,CAAJA,IADY,CAEZC,MAAM,CAANA,MAFY,CAAd,E,0NAMK,CACP,mBACE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,0BAAI,SAAS,CAAC,WAAd,cAAoC,KAAKH,KAAL,CAAWC,QAA/C,CADF,cAEE,2BAAK,SAAS,CAAC,UAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,4BAAf,eACE,oDACQ,6BAAI,KAAKD,KAAL,CAAWE,IAAf,CADR,CADF,cAIE,sDACU,6BAAI,KAAKF,KAAL,CAAWG,MAAf,CADV,CAJF,CADF,CADF,cAWE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,4BAAf,eACE,oBAAC,IAAD,EAAM,EAAE,CAAC,WAAT,CAAqB,SAAS,CAAC,gCAA/B,cADF,cAIE,oBAAC,IAAD,EAAM,EAAE,CAAC,WAAT,CAAqB,SAAS,CAAC,gCAA/B,cAJF,CADF,CAXF,CAFF,CADF,CADF,CA6BD,C,qBApEmBR,S,EAuEtB,cAAeI,CAAAA,OAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport { stats } from \"../UserFunctions\";\n\nclass Profile extends Component {\n  constructor() {\n    super();\n    this.state = {\n      username: \"\",\n      wins: 0,\n      losses: 0,\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      const token = localStorage.token;\n      const decoded = jwt_decode(token);\n      if (Date.now() >= decoded.exp * 1000) throw new Error(\"token expired\");\n      this.setState({ username: decoded.username });\n      const { wins, losses } = await stats(decoded.userId);\n      this.setState({\n        wins,\n        losses,\n      });\n    } catch (err) {\n      this.props.history.push(`/users/login`);\n    }\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    const token = localStorage.token;\n    const decoded = jwt_decode(token);\n    const { wins, losses } = await stats(decoded.userId);\n\n    if (prevState.wins !== wins || prevState.losses !== losses)\n      this.setState({\n        wins,\n        losses,\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"container mt-5\">\n        <div className=\"col-md-6 m-auto\">\n          <h1 className=\"fas fa-3x\">Welcome, {this.state.username}</h1>\n          <div className=\"row mt-5\">\n            <div className=\"col-md-6 m-auto\">\n              <div className=\"card card-body text-center\">\n                <h6>\n                  Wins: <b>{this.state.wins}</b>\n                </h6>\n                <h6>\n                  Losses: <b>{this.state.losses}</b>\n                </h6>\n              </div>\n            </div>\n            <div className=\"col-md-6 m-auto\">\n              <div className=\"card card-body text-center\">\n                <Link to=\"/hostgame\" className=\"btn btn-primary btn-block mb-2\">\n                  Host Game\n                </Link>\n                <Link to=\"/joingame\" className=\"btn btn-primary btn-block mb-2\">\n                  Join Game\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}